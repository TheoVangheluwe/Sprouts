<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu des Pousses - Points Initiaux et Connexion</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: #f0f0f0;
        }
        #canvas-container {
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <script>
        let points = [];
        let currentCurve = [];
        let isDrawing = false;

        function setup() {
            let canvas = createCanvas(500, 500);
            canvas.parent('canvas-container');
            background(255);

            // Créer 3 points initiaux aléatoires
            for (let i = 0; i < 3; i++) {
                points.push({
                    x: random(100, 400),
                    y: random(100, 400)
                });
            }
        }

        function draw() {
            background(255);

            // Dessiner les points initiaux
            fill(0);
            noStroke();
            for (let p of points) {
                ellipse(p.x, p.y, 10, 10);
            }

            // Dessiner la courbe à main levée si l'utilisateur dessine
            if (isDrawing) {
                noFill();
                stroke(0);
                beginShape();
                for (let pt of currentCurve) {
                    vertex(pt.x, pt.y);
                }
                vertex(mouseX, mouseY);
                endShape();
            }
        }

        function mousePressed() {
            // Démarrer une courbe si on clique sur un des points initiaux
            let selectedPoints = points.filter(p => dist(p.x, p.y, mouseX, mouseY) < 10);

            if (selectedPoints.length === 1) {
                isDrawing = true;
                currentCurve = [selectedPoints[0]]; // Commence une courbe avec ce point
            }
        }

        function mouseReleased() {
            // Lorsque l'utilisateur relâche la souris, on termine la courbe
            if (isDrawing) {
                isDrawing = false;
                let selectedPoints = points.filter(p => dist(p.x, p.y, mouseX, mouseY) < 10);
                
                if (selectedPoints.length === 1 && selectedPoints[0] !== currentCurve[0]) {
                    currentCurve.push(selectedPoints[0]);
                }

                // Ajouter la courbe à la liste de connexions (si elle relie deux points)
                if (currentCurve.length > 1) {
                    // Vous pouvez enregistrer la courbe ici si besoin
   
